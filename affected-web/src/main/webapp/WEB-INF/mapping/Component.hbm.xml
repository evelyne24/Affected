<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping package="org.codeandmagic.affected.component">

    <class name="Component" table="component">
        <id name="id">
            <generator class="hilo"/>
        </id>

        <natural-id>
            <property name="tag"/>
        </natural-id>

        <version name="version" unsaved-value="null"/>

        <property name="prettyName" />

        <set name="children" table="component_children" cascade="all-delete-orphan" lazy="false" fetch="subselect">
            <key column="parentId"/>
            <many-to-many column="id" class="Component" fetch="select"/>
        </set>

        <!--  <set name="parents" inverse="true" lazy="false" fetch="subselect">
            <key column="id"/>
            <many-to-many column="parentId" class="Component"/>
        </set> -->
    </class>

</hibernate-mapping>
